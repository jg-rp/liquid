
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python engine for the Liquid template language.">
      
      
      
      
        <link rel="prev" href="../known_issues/">
      
      
        <link rel="next" href="../tag_reference/">
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Migration guide - Python Liquid</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#new-features" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Python Liquid" class="md-header__button md-logo" aria-label="Python Liquid" data-md-component="logo">
      
  <img src="../img/droplet_white_liquid.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Liquid
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Migration guide
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/jg-rp/liquid" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    jg-rp/liquid
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href=".." class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../tag_reference/" class="md-tabs__link">
          
  
  
  Tag reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../filter_reference/" class="md-tabs__link">
          
  
  
  Filter reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/convenience/" class="md-tabs__link">
          
  
  
  API reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Python Liquid" class="md-nav__button md-logo" aria-label="Python Liquid" data-md-component="logo">
      
  <img src="../img/droplet_white_liquid.svg" alt="logo">

    </a>
    Python Liquid
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jg-rp/liquid" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    jg-rp/liquid
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../syntax/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Liquid Syntax
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rendering_templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rendering templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Liquid environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loading_templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Loading templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../render_context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Render context data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../variables_and_drops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Variables, types and drops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../babel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Internationalization and localization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../static_analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Static template analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom_filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom filters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom_tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../known_issues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known issues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Migration guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Migration guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-features" class="md-nav__link">
    <span class="md-ellipsis">
      New features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-version-support-and-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Python version support and dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-changes" class="md-nav__link">
    <span class="md-ellipsis">
      API changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#package-level-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Package-level functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environmentparse" class="md-nav__link">
    <span class="md-ellipsis">
      Environment.parse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environmentrender" class="md-nav__link">
    <span class="md-ellipsis">
      Environment.render
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Template caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expression-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Expression caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-loaders" class="md-nav__link">
    <span class="md-ellipsis">
      Template loaders
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      Template inheritance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template inheritance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Custom tags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Exceptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#render-context" class="md-nav__link">
    <span class="md-ellipsis">
      Render context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tokens-streams-and-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Tokens, streams and expressions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tag reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tag reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tag_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Default tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optional_tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extra tags
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Filter reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Filter reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filter_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Default filters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../optional_filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extra filters
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/convenience/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Convenience functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/loaders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Loaders
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/builtin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Builtin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/extra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extra
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/messages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Messages
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/ast/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AST
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/expression/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Expression
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/render_context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Render context
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filter helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/tag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tag
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/undefined/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Undefined
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tokens
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-features" class="md-nav__link">
    <span class="md-ellipsis">
      New features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-version-support-and-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Python version support and dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-changes" class="md-nav__link">
    <span class="md-ellipsis">
      API changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#package-level-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Package-level functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environmentparse" class="md-nav__link">
    <span class="md-ellipsis">
      Environment.parse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environmentrender" class="md-nav__link">
    <span class="md-ellipsis">
      Environment.render
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Template caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expression-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Expression caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-loaders" class="md-nav__link">
    <span class="md-ellipsis">
      Template loaders
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      Template inheritance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template inheritance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Custom tags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Exceptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#render-context" class="md-nav__link">
    <span class="md-ellipsis">
      Render context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tokens-streams-and-expressions" class="md-nav__link">
    <span class="md-ellipsis">
      Tokens, streams and expressions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Migration guide</h1>

<p>This is the documentation for the latest version of Python Liquid (<a href="https://github.com/jg-rp/liquid">GitHub</a>). Python Liquid strives for 100% compatibility with <a href="https://github.com/Shopify/liquid">Shopify/liquid</a>, the reference implementation.</p>
<p><a href="https://github.com/jg-rp/python-liquid2">Python Liquid2</a>, a Python implementation of Liquid2, is an alternative Liquid template engine that deliberately deviates from <a href="https://github.com/Shopify/liquid">Shopify/liquid</a> in its syntax and rendering behavior.</p>
<p>Here we cover migrating from Python Liquid version 1.x to the latest version. See the <a href="https://jg-rp.github.io/python-liquid2/migration/">Liquid2 migration guide</a> if you're interested in switching to Liquid2.</p>
<h2 id="new-features">New features</h2>
<p>Other than improved error messages and some new standard filters (<a href="../filter_reference/#has"><code>has</code></a>, <a href="../filter_reference/#find"><code>find</code></a>, <a href="../filter_reference/#find_index"><code>find_index</code></a> and <a href="../filter_reference/#reject"><code>reject</code></a>), there are no new features. Our goal with this release was to improve Python Liquid's API and improve compatibility with Shopify/liquid.</p>
<p>If you're interested in new features, take a look at <a href="https://jg-rp.github.io/python-liquid2/migration/#new-features">Liquid2</a>.</p>
<h2 id="python-version-support-and-dependencies">Python version support and dependencies</h2>
<p>Support for Python versions 3.7 and 3.8 has been dropped. Both are now <a href="https://endoflife.date/python">end of life</a>.</p>
<p><a href="https://github.com/pallets/markupsafe/">MarkupSafe</a> is now a required dependency. Previously it was an optional dependency.</p>
<p><a href="https://github.com/python-babel/babel">Babel</a> and <a href="https://pypi.org/project/pytz/">pytz</a> are now dependencies as internationalization and localization tags and filters are included in Python Liquid. They used to be available from a separate package.</p>
<h2 id="api-changes">API changes</h2>
<h3 id="package-level-functions">Package-level functions</h3>
<p><a href="../api/convenience/#liquid.parse"><code>parse</code></a>, <a href="../api/convenience/#liquid.render"><code>render</code></a> and <a href="../api/convenience/#liquid.render_async"><code>render_async</code></a> are package-level functions that parse and render templates using the <a href="../environment/">default environment</a>. Where as before you might have done something like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">liquid</span><span class="w"> </span><span class="kn">import</span> <span class="n">Template</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="s2">&quot;Hello, {{ you }}!&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">you</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">))</span>
</span></code></pre></div>
<p>You can now do:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">liquid</span><span class="w"> </span><span class="kn">import</span> <span class="n">render</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Hello, {{ you }}!&quot;</span><span class="p">,</span> <span class="n">you</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">))</span>
</span></code></pre></div>
<h3 id="environmentparse">Environment.parse</h3>
<p><a href="../api/environment/#liquid.Environment.from_string"><code>Environment.from_string</code></a> is now aliased as <a href="../api/environment/#liquid.Environment.parse"><code>Environment.parse</code></a>. The old <code>parse</code> method, which returned a list of nodes instead of a template, is now private.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">liquid</span><span class="w"> </span><span class="kn">import</span> <span class="n">Environment</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">template</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;Hello, {{ you }}!&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="environmentrender">Environment.render</h3>
<p><a href="../api/environment/#liquid.Environment.render"><code>Environment.render</code></a> and <a href="../api/environment/#liquid.Environment.render_async"><code>Environment.render_async</code></a> parse and immediately render template source text without forcing you to explicitly create a new template.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">liquid</span><span class="w"> </span><span class="kn">import</span> <span class="n">Environment</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&quot;Hello, {{ you }}!&quot;</span><span class="p">,</span> <span class="n">you</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">))</span>
</span></code></pre></div>
<h3 id="template-caching">Template caching</h3>
<p>The <code>cache_size</code> argument to <code>liquid.Environment</code> and <code>liquid.Template</code> has been removed. Template caching is now handled exclusively by template loaders. See <a href="../loading_templates/#caching-file-system-loader"><code>CachingFileSystemLoader</code></a> and <a href="../api/loaders/#liquid.CachingLoaderMixin"><code>CachingLoaderMixin</code></a>.</p>
<h3 id="expression-caching">Expression caching</h3>
<p>The <code>expression_cache_size</code> argument to <code>liquid.Environment</code> and <code>liquid.Template</code> has been removed. Environment-level expression caching is no longer available as it does not play nicely with detailed error messages. If you need to cache parsing of Liquid expressions, it is now recommended to implement a cache per tag, where it makes sense to do so for your use case.</p>
<h3 id="template-loaders">Template loaders</h3>
<p><a href="../api/loaders/#liquid.loader.BaseLoader.get_source"><code>BaseLoader.get_source</code></a> and <a href="../api/loaders/#liquid.loader.BaseLoader.get_source_async"><code>BaseLoader.get_source_async</code></a> have been changed to accept an optional <code>context</code> argument and arbitrary keyword arguments as "load context". These new arguments replace methods <code>get_source_with_context</code> and <code>get_source_with_args</code>, which have been removed.</p>
<p>The value returned from <code>get_source</code>, <a href="../api/loaders/#liquid.loader.TemplateSource"><code>TemplateSource</code></a>, has also changed to be a named tuple of the form <code>(text, name, uptodate, matter)</code>. It used to be <code>(source, filename, uptodate, matter)</code>.</p>
<h3 id="template-inheritance">Template inheritance</h3>
<p>We've added methods <code>variables()</code>, <code>variable_paths()</code>, <code>variable_segments()</code>, <code>global_variables()</code>, <code>global_variable_paths()</code>, <code>global_variable_segments()</code>, <code>filter_names()</code>, <code>tag_names()</code> and their async equivalents to <a href="../api/template/"><code>liquid.BoundTemplate</code></a>. These are convenience methods for reporting variables, tags and filters using static analysis.</p>
<h4 id="custom-tags">Custom tags</h4>
<p>We've Changed <a href="../api/ast/#liquid.Node.children"><code>Node.children()</code></a> to return a sequence of <a href="../api/ast/"><code>Node</code></a> instance only, and added <a href="../api/ast/#liquid.Node.expressions"><code>expressions()</code></a>, <a href="../api/ast/#liquid.Node.template_scope"><code>template_scope()</code></a>, <a href="../api/ast/#liquid.Node.block_scope"><code>block_scope()</code></a> and <a href="../api/ast/#liquid.Node.partial_scope"><code>partial_scope()</code></a> methods.</p>
<p>See <a href="https://github.com/jg-rp/liquid/tree/main/liquid/builtin/tags">liquid/builtin/tags</a> for examples.</p>
<h3 id="exceptions">Exceptions</h3>
<p><code>liquid.exceptions.Error</code> has been renamed to <code>liquid.exceptions.LiquidError</code>.</p>
<p><code>liquid.exceptions.TemplateNotFound</code> has been renamed to <code>liquid.exceptions.TemplateNotFoundError</code>.</p>
<p><code>liquid.exceptions.NoSuchFilterFunc</code> has been renamed to <code>liquid.exceptions.UnknownFilterError</code>.</p>
<h3 id="render-context">Render context</h3>
<p><code>liquid.Context</code> has been renamed to <code>liquid.RenderContext</code> and it's constructor arguments changed to require a instance of <a href="../api/template/"><code>BoundTemplate</code></a> as its only positional argument instead of an instance of <code>Environment</code>. All other arguments are now keyword only.</p>
<h3 id="tokens-streams-and-expressions">Tokens, streams and expressions</h3>
<p>All <a href="../api/tokens/">tokens</a> are now named tuples of the form <code>(kind, value, start_index, source)</code>. They used to be <code>(linenum, type, value)</code>, and sometimes standard tuples instead of named tuples.</p>
<p>The <code>liquid.expressions</code> module has been removed in favour of a single <a href="../api/tokens/#liquid.TokenStream"><code>TokenStream</code></a> interface (there used to be two) and more sane expression parsing functions or static methods. Here's a summary mapping from old expression parsing functions to the recommended new parsing functions/methods.</p>
<table>
<thead>
<tr>
<th>Old</th>
<th>New</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tokenize_common_expression(str, linenum)</code></td>
<td><code>liquid.builtin.expressions.tokenize(source, parent_token)</code></td>
</tr>
<tr>
<td><code>*.tokenize(source, linenum)</code></td>
<td><code>liquid.builtin.expressions.tokenize(source, parent_token)</code></td>
</tr>
<tr>
<td><code>parse_common_expression(stream)</code></td>
<td><code>liquid.builtin.expressions.parse_primitive(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_keyword_arguments(expr, linenum)</code></td>
<td><code>liquid.builtin.expressions.KeywordArgument.parse(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_identifier(stream)</code></td>
<td><code>liquid.builtin.expressions.Path.parse(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_unchained_identifier(stream)</code></td>
<td><code>liquid.builtin.expressions.parse_identifier(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_string_or_identifier</code></td>
<td><code>liquid.builtin.expressions.parse_string_or_path(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_unchained_identifier</code></td>
<td><code>liquid.builtin.expressions.parse_name(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_boolean</code></td>
<td><code>liquid.builtin.expressions.parse_primitive(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_nil</code></td>
<td><code>liquid.builtin.expressions.parse_primitive(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_empty</code></td>
<td><code>liquid.builtin.expressions.parse_primitive(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_blank</code></td>
<td><code>liquid.builtin.expressions.parse_primitive(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_string_literal</code></td>
<td><code>liquid.builtin.expressions.parse_primitive(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_integer_literal</code></td>
<td><code>liquid.builtin.expressions.parse_primitive(env, stream)</code></td>
</tr>
<tr>
<td><code>parse_float_literal</code></td>
<td><code>liquid.builtin.expressions.parse_primitive(env, stream)</code></td>
</tr>
<tr>
<td><code>Environment.parse_boolean_expression</code></td>
<td><code>liquid.builtin.expressions.BooleanExpression.parse(env, stream)</code></td>
</tr>
<tr>
<td><code>Environment.parse_filtered_expression</code></td>
<td><code>liquid.builtin.expressions.FilteredExpression.parse(env, stream)</code></td>
</tr>
<tr>
<td><code>Environment.parse_loop_expression</code></td>
<td><code>liquid.builtin.expressions.LoopExpression.parse(env, stream)</code></td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.top", "navigation.tabs", "navigation.tracking", "navigation.expand"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>
"use strict";(self.webpackChunkliquid_docs=self.webpackChunkliquid_docs||[]).push([[5194],{6603:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>r,toc:()=>h});var a=t(5893),s=t(1151);const i={},o="JSONPath Tags",r={id:"jsonpath/tags",title:"JSONPath Tags",description:"This page documents tags included with the Liquid JSONPath package. See the tag reference for details of all standard tags. Also see the Python JSONPath docs for JSONPath selector syntax.",source:"@site/docs/jsonpath/tags.md",sourceDirName:"jsonpath",slug:"/jsonpath/tags",permalink:"/liquid/jsonpath/tags",draft:!1,unlisted:!1,editUrl:"https://github.com/jg-rp/liquid/tree/docs/docs/jsonpath/tags.md",tags:[],version:"current",frontMatter:{},sidebar:"languageSidebar",previous:{title:"JSONPath Filters",permalink:"/liquid/jsonpath/filters"}},l={},h=[{value:"for",id:"for",level:2},{value:"Options",id:"options",level:3},{value:"Customizing JSONPath",id:"customizing-jsonpath",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.useMDXComponents)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"jsonpath-tags",children:"JSONPath Tags"}),"\n",(0,a.jsxs)(n.p,{children:["This page documents tags included with the ",(0,a.jsx)(n.a,{href:"https://github.com/jg-rp/liquid-jsonpath",children:"Liquid JSONPath"})," package. See the ",(0,a.jsx)(n.a,{href:"/liquid/language/tags",children:"tag reference"})," for details of all standard tags. Also see the ",(0,a.jsx)(n.a,{href:"https://jg-rp.github.io/python-jsonpath/syntax/",children:"Python JSONPath docs"})," for JSONPath selector syntax."]}),"\n",(0,a.jsx)(n.h2,{id:"for",children:"for"}),"\n",(0,a.jsxs)(n.p,{children:["A drop-in replacement for the ",(0,a.jsxs)(n.a,{href:"/liquid/language/tags#for",children:["standard ",(0,a.jsx)(n.code,{children:"for"})," tag"]})," with support for piping an iterable through a JSONPath expression."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-liquid",children:"{% for name in site | '$.users[?@.score > 60].name' %}\n  {{- name }},\n{%- endfor %}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["If the following data was assigned to a variable called ",(0,a.jsx)(n.code,{children:"site"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",metastring:'title="data"',children:'{\n  "users": [\n    {\n      "name": "Sue",\n      "score": 100\n    },\n    {\n      "name": "John",\n      "score": 86\n    },\n    {\n      "name": "Sally",\n      "score": 84\n    },\n    {\n      "name": "Jane",\n      "score": 55\n    }\n  ]\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"We'd get an output like this:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-plain",metastring:'title="output"',children:"Sue,John,Sally,\n"})}),"\n",(0,a.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,a.jsxs)(n.p,{children:["This ",(0,a.jsx)(n.code,{children:"for"})," tag defaults to an ",(0,a.jsx)(n.a,{href:"/liquid/guides/undefined-variables",children:"undefined"})," instance when given a JSONPath and an unacceptable iterable. You can change this behavior by subclassing ",(0,a.jsx)(n.code,{children:"liquid_jsonpath.JSONPathForTag"})," and setting the ",(0,a.jsx)(n.code,{children:"default"})," class attribute to one of ",(0,a.jsx)(n.code,{children:"Default.EMPTY"}),", ",(0,a.jsx)(n.code,{children:"Default.RAISE"})," or ",(0,a.jsx)(n.code,{children:"Default.UNDEFINED"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from liquid import Environment\nfrom liquid_jsonpath import Default\nfrom liquid_jsonpath import JSONPathForTag\n\nclass MyJSONPathForTag(JSONPathForTag):\n    default = Default.EMPTY\n\nenv = Environment()\nenv.add_tag(MyJSONPathForTag)\n# ...\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Default.RAISE"})," will raise a ",(0,a.jsx)(n.code,{children:"LiquidTypeError"})," when given an unacceptable iterable, and ",(0,a.jsx)(n.code,{children:"Default.EMPTY"})," will simply use an empty list instead."]}),"\n",(0,a.jsx)(n.h3,{id:"customizing-jsonpath",children:"Customizing JSONPath"}),"\n",(0,a.jsxs)(n.p,{children:["This ",(0,a.jsx)(n.code,{children:"for"})," tag uses a ",(0,a.jsx)(n.a,{href:"https://jg-rp.github.io/python-jsonpath/api/#jsonpath.JSONPathEnvironment",children:(0,a.jsx)(n.code,{children:"JSONPathEnvironment"})})," with its default configuration. You can use a custom ",(0,a.jsx)(n.code,{children:"JSONPathEnvironment"})," by subclassing ",(0,a.jsx)(n.code,{children:"liquid_jsonpath.JSONPathForTag"})," and setting the ",(0,a.jsx)(n.code,{children:"jsonpath_class"})," class attribute."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from jsonpath import JSONPathEnvironment\nfrom liquid_jsonpath import JSONPathForTag\n\nclass MyJSONPathEnv(JSONPathEnvironment):\n    root_token = "^"  # silly example\n\nclass MyJSONPathForTag(JSONPathForTag):\n    jsonpath_class = MyJSONPathEnv\n\nenv = Environment()\nenv.add_tag(MyJSONPathForTag)\n# ...\n'})})]})}function c(e={}){const{wrapper:n}={...(0,s.useMDXComponents)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.r(n),t.d(n,{MDXProvider:()=>r,useMDXComponents:()=>o});var a=t(7294);const s={},i=a.createContext(s);function o(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);
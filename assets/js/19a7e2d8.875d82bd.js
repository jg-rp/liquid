"use strict";(self.webpackChunkliquid_docs=self.webpackChunkliquid_docs||[]).push([[5941],{8386:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var a=n(3117),r=(n(7294),n(3905));const i={},l="Extra Tags and Filters",o={unversionedId:"extra/introduction",id:"extra/introduction",title:"Extra Tags and Filters",description:"_New in version 1.5.0_",source:"@site/docs/extra/introduction.md",sourceDirName:"extra",slug:"/extra/introduction",permalink:"/liquid/extra/introduction",draft:!1,editUrl:"https://github.com/jg-rp/liquid/tree/docs/docs/extra/introduction.md",tags:[],version:"current",frontMatter:{},sidebar:"languageSidebar",previous:{title:"Liquid Tags",permalink:"/liquid/language/tags"},next:{title:"Extra Filters",permalink:"/liquid/extra/filters"}},s={},d=[{value:"Add All Extras",id:"add-all-extras",level:2},{value:"Adding Extra Filters",id:"adding-extra-filters",level:2},{value:"Adding Extra Tags",id:"adding-extra-tags",level:2}],p={toc:d};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"extra-tags-and-filters"},"Extra Tags and Filters"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"New in version 1.5.0"))),(0,r.kt)("p",null,'Extra tags and filters are those that are not "standard", require zero additional dependencies, and are commonly useful in scenarios that don\'t require strict compatibility with Ruby Liquid. Since Python Liquid version 1.5.0, extra tags and filters are importable from the ',(0,r.kt)("inlineCode",{parentName:"p"},"liquid.extra")," package."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Prior to Python Liquid version 1.5.0, some extra tags and filters were maintained in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/jg-rp/liquid-extra"},"Liquid Extra repository"),". Wherever possible, you should use extra tags and filters included in Python Liquid over those found in Liquid Extra."),(0,r.kt)("p",{parentName:"admonition"},"Python Liquid Extra will be maintained with bug fixes, but no new features, and is expected to work with Python Liquid up to, but not including, version 2.0.0 (unreleased).")),(0,r.kt)("p",null,"Unlike ",(0,r.kt)("a",{parentName:"p",href:"/liquid/language/tags"},"standard tags and filters"),", which are registered for you automatically, non-standard tags and filters must be explicitly registered with an ",(0,r.kt)("a",{parentName:"p",href:"/liquid/api/Environment"},(0,r.kt)("inlineCode",{parentName:"a"},"Environment")),", just like you would with ",(0,r.kt)("a",{parentName:"p",href:"/liquid/guides/custom-tags"},"custom tags or filters"),"."),(0,r.kt)("h2",{id:"add-all-extras"},"Add All Extras"),(0,r.kt)("p",null,"To add all extra tags and filters to a Liquid environment, with their default options, you can use the convenience function ",(0,r.kt)("inlineCode",{parentName:"p"},"liquid.extra.add_tags_and_filters()"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from liquid import Environment\nfrom liquid.extra import add_tags_and_filters\n\nenv = Environment()\nadd_tags_and_filters(env)\n\ntemplate = env.from_string("""\\\n{% with greeting: "Hello" -%}\n  {% for person in people -%}\n    {% assign name = person.handle if person.has_handle else person.first_name | capitalize -%}\n    {% if not person.leaving %}\n      {{ greeting }}, {{ name }}\n    {% else %}\n      Goodbye, {{ name }}\n    {% endif -%}\n  {% endfor -%}\n{% endwith -%}\n""")\n\npeople = [\n    {\n        "handle": "",\n        "has_handle": False,\n        "first_name": "sue",\n        "leaving": False,\n    },\n    {\n        "handle": "MyNameIsJohn",\n        "has_handle": True,\n        "first_name": "John",\n        "leaving": True,\n    },\n]\n\nprint(template.render(people=people))\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-plain",metastring:'title="output"',title:'"output"'},"Hello, Sue\n\nGoodbye, MyNameIsJohn\n")),(0,r.kt)("h2",{id:"adding-extra-filters"},"Adding Extra Filters"),(0,r.kt)("p",null,"Filters can be implemented as simple functions, classes with a ",(0,r.kt)("inlineCode",{parentName:"p"},"__call__")," method, or closures that returns a callable object. The latter two approaches are useful if a filter is configurable, in which case it will need to be instantiated or called before registering it with an ",(0,r.kt)("a",{parentName:"p",href:"/liquid/api/Environment"},(0,r.kt)("inlineCode",{parentName:"a"},"Environment")),"."),(0,r.kt)("p",null,"For example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"index")," filter is a simple function, so we just pass the function object to ",(0,r.kt)("a",{parentName:"p",href:"/liquid/api/Environment#add_filter"},(0,r.kt)("inlineCode",{parentName:"a"},"Environment.add_filter()")),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from liquid import Environment\nfrom liquid.extra import filters\n\nenv = Environment()\nenv.add_filter("index", filters.index)\n\ntemplate = env.from_string("""\\\n{{ shapes | index: \'square\' }}\n{% assign colors = "red, blue, green" | split: ", " -%}\n{{ colors | index: \'blue\' }}\n""")\n\nprint(template.render(shapes=["square", "circle", "triangle"]))\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-plain",metastring:'title="output"',title:'"output"'},"0\n1\n")),(0,r.kt)("p",null,"Whereas the ",(0,r.kt)("inlineCode",{parentName:"p"},"json")," filter is a class that can be configured with a ",(0,r.kt)("inlineCode",{parentName:"p"},"default")," function, so it must be instantiated."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from liquid import Environment\nfrom liquid.extra.filters import JSON\n\nenv = Environment()\nenv.add_filter("json", JSON())\n\ntemplate = env.from_string("{{ data | json }}")\n\nsome_data = {\n    "foo": [1,2,3],\n    "bar": "Hello!"\n}\n\nprint(template.render(data=some_data))\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-plain",metastring:'title="output"',title:'"output"'},'\'{"foo": [1, 2, 3], "bar": "Hello!"}\'\n')),(0,r.kt)("p",null,"Refer to the ",(0,r.kt)("a",{parentName:"p",href:"/liquid/extra/filters"},"extra filter reference")," for examples of registering each filter and their available options."),(0,r.kt)("h2",{id:"adding-extra-tags"},"Adding Extra Tags"),(0,r.kt)("p",null,"All tags are implemented as a class inheriting from ",(0,r.kt)("a",{parentName:"p",href:"/liquid/api/Tag"},(0,r.kt)("inlineCode",{parentName:"a"},"liquid.tag.Tag")),". ",(0,r.kt)("a",{parentName:"p",href:"/liquid/api/Environment#add_tag"},(0,r.kt)("inlineCode",{parentName:"a"},"Environment.add_tag()"))," always takes a ",(0,r.kt)("inlineCode",{parentName:"p"},"Tag")," object, not an instance of it."),(0,r.kt)("p",null,"For example, the ",(0,r.kt)("a",{parentName:"p",href:"/liquid/extra/tags#if-not"},"if (not)")," tag - which adds a logical ",(0,r.kt)("inlineCode",{parentName:"p"},"not")," operator and grouping with parentheses - would be registered as follows."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from liquid import Environment\nfrom liquid.extra.tags import IfNotTag\n\nenv = Environment()\nenv.add_tag(IfNotTag)\n\ntemplate = env.from_string("""\\\n{% if not product.available %}\n   This product is not available.\n{% endif %}\n""")\n\nprint(template.render(product={"available": False}))\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-plain",metastring:'title="output"',title:'"output"'},"   This product is not available.\n")),(0,r.kt)("p",null,"Some tags can be configured by subclassing them and setting class variables or overriding methods."))}u.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>c});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=d(n),c=r,f=m["".concat(s,".").concat(c)]||m[c]||u[c]||i;return n?a.createElement(f,l(l({ref:t},p),{},{components:n})):a.createElement(f,l({ref:t},p))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);
"use strict";(self.webpackChunkliquid_docs=self.webpackChunkliquid_docs||[]).push([[814],{2033:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var i=t(3117),a=t(102),r=(t(7294),t(3905)),o=["components"],l={},p="Django Liquid",s={unversionedId:"guides/django-liquid",id:"guides/django-liquid",title:"Django Liquid",description:"A Django template backend for Python Liquid.",source:"@site/docs/guides/django-liquid.md",sourceDirName:"guides",slug:"/guides/django-liquid",permalink:"/liquid/guides/django-liquid",draft:!1,editUrl:"https://github.com/jg-rp/liquid/tree/docs/docs/guides/django-liquid.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Undefined Variables",permalink:"/liquid/guides/undefined-variables"},next:{title:"Flask Liquid",permalink:"/liquid/guides/flask-liquid"}},d={},u=[{value:"Install",id:"install",level:2},{value:"Configure",id:"configure",level:2},{value:"Render",id:"render",level:2},{value:"Environment Factory",id:"environment-factory",level:2}],m={toc:u};function c(e){var n=e.components,t=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"django-liquid"},"Django Liquid"),(0,r.kt)("p",null,"A ",(0,r.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/4.0/topics/templates/"},"Django template backend")," for Python Liquid."),(0,r.kt)("h2",{id:"install"},"Install"),(0,r.kt)("p",null,"Install Django Liquid using ",(0,r.kt)("a",{parentName:"p",href:"https://pipenv.pypa.io/en/latest/"},"Pipenv"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ pipenv install django-liquid\n")),(0,r.kt)("p",null,"Or ",(0,r.kt)("a",{parentName:"p",href:"https://pip.pypa.io/en/stable/getting-started/"},"pip"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"$ python -m pip install -U django-liquid\n")),(0,r.kt)("h2",{id:"configure"},"Configure"),(0,r.kt)("p",null,"Configure Django Liquid with the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/4.0/topics/templates/#configuration"},(0,r.kt)("inlineCode",{parentName:"a"},"TEMPLATES"))," setting in your ",(0,r.kt)("inlineCode",{parentName:"p"},"settings.py")," file, using ",(0,r.kt)("inlineCode",{parentName:"p"},"django_liquid.liquid.liquid")," for the ",(0,r.kt)("inlineCode",{parentName:"p"},"BACKEND")," setting. This example keeps the default Django template backend configuration, as created with ",(0,r.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/4.0/ref/django-admin/#django-admin-startproject"},"startproject"),", and adds configuration for a Liquid template backend."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="settings.py"',title:'"settings.py"'},"TEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n    {\n        'BACKEND': 'django_liquid.liquid.Liquid',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {},\n    },\n]\n")),(0,r.kt)("p",null,"When ",(0,r.kt)("inlineCode",{parentName:"p"},"APP_DIRS")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"True"),", Liquid will look for templates in the ",(0,r.kt)("inlineCode",{parentName:"p"},"liquid")," subdirectory of installed applications. ",(0,r.kt)("inlineCode",{parentName:"p"},"OPTIONS")," are passed to the ",(0,r.kt)("a",{parentName:"p",href:"/api/Environment"},"liquid.Environment()")," constructor. The default environment is configured as follows."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"autoescape"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"True")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"loader"),": a ",(0,r.kt)("inlineCode",{parentName:"li"},"FileSystemLoader")," configured for ",(0,r.kt)("inlineCode",{parentName:"li"},"DIRS")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"APP_DIRS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"undefined"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"DebugUndefined")," if ",(0,r.kt)("inlineCode",{parentName:"li"},"settings.DEBUG")," else ",(0,r.kt)("inlineCode",{parentName:"li"},"Undefined"))),(0,r.kt)("p",null,"For example, if ",(0,r.kt)("inlineCode",{parentName:"p"},"myapp")," is a Django app, Django will look for Liquid templates in ",(0,r.kt)("inlineCode",{parentName:"p"},"mysite/myapp/liquid/"),", Django templates in ",(0,r.kt)("inlineCode",{parentName:"p"},"mysite/myapp/templates/")," and, if configured, ",(0,r.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/4.0/topics/templates/#django.template.backends.jinja2.Jinja2"},"Jinja2 templates")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"mysite/myapp/jinja2/"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mysite/\n    manage.py\n    mysite/\n        __init__.py\n        settings.py\n        urls.py\n        asgi.py\n        wsgi.py\n    myapp/\n        __init__.py\n        admin.py\n        apps.py\n        liquid/\n        models.py\n        templates/\n        tests.py\n        views.py\n")),(0,r.kt)("p",null,"See Django's ",(0,r.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/4.0/topics/templates/#django.template.backends.base.Template.render"},"Template.render")," documentation for an explanation of how Django searches ",(0,r.kt)("inlineCode",{parentName:"p"},"DIRS")," when multiple template engines are configured."),(0,r.kt)("h2",{id:"render"},"Render"),(0,r.kt)("p",null,"Render Liquid templates from your app views just like any other Django template backend."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="views.py"',title:'"views.py"'},'from django.shortcuts import render\n\ndef index(request):\n    context = {"greeting": "hello"}\n    return render(request, \'myapp/index.html\', context)\n')),(0,r.kt)("p",null,"If you've got multiple template engines configured, like in the example above, Django will use the first engine and template it finds matching the given template name. You can force Django to use a specific template engine with the ",(0,r.kt)("inlineCode",{parentName:"p"},"using")," argument to ",(0,r.kt)("inlineCode",{parentName:"p"},"render"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="views.py"',title:'"views.py"'},"from django.shortcuts import render\n\ndef index(request):\n    context = {\"greeting\": \"hello\"}\n    return render(request, 'myapp/index.html', context, using='liquid')\n")),(0,r.kt)("h2",{id:"environment-factory"},"Environment Factory"),(0,r.kt)("p",null,"You can configure your ",(0,r.kt)("a",{parentName:"p",href:"/api/Environment"},"liquid.Environment")," with additional tags or filters by setting the ",(0,r.kt)("inlineCode",{parentName:"p"},"environment")," template backend option to the name of an ",(0,r.kt)("inlineCode",{parentName:"p"},"Environment")," factory function. Lets say you want to register the ",(0,r.kt)("a",{parentName:"p",href:"/extra/filters#json"},"json")," filter from ",(0,r.kt)("a",{parentName:"p",href:"/extra/introduction"},"python-liquid-extra"),". If the following is saved as ",(0,r.kt)("inlineCode",{parentName:"p"},"myproject/liquid.py"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="myproject/liquid.py"',title:'"myproject/liquid.py"'},'from liquid import Environment\nfrom liquid_extra import filters\n\ndef environment(**options):\n    env = Environment(**options)\n    env.add_filter("json", filters.JSON())\n    # Register more filters or tags here.\n    return env\n')),(0,r.kt)("p",null,"Then tell Django to use your environment factory function like this."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python",metastring:'title="settings.py"',title:'"settings.py"'},"TEMPLATES = [\n    {\n        'BACKEND': 'django_liquid.liquid.Liquid',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'environment': 'myproject.liquid.environment'\n        },\n    },\n]\n")))}c.isMDXComponent=!0},3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return c}});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=i.createContext({}),s=function(e){var n=i.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=s(e.components);return i.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=s(t),c=a,g=m["".concat(p,".").concat(c)]||m[c]||u[c]||r;return t?i.createElement(g,o(o({ref:n},d),{},{components:t})):i.createElement(g,o({ref:n},d))}));function c(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<r;s++)o[s]=t[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);